<!DOCTYPE html>
<html>
  <head>
    <title>Error Debug</title>
    <style>
      body {
        font-family: Arial;
        margin: 20px;
        background: #f5f5f5;
      }
      .container {
        max-width: 800px;
        background: white;
        padding: 20px;
        border-radius: 8px;
      }
      pre {
        background: #222;
        color: #0f0;
        padding: 15px;
        overflow: auto;
        border-radius: 4px;
      }
      h2 {
        color: #d32f2f;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Error Trace</h1>
      <div id="errorLog"></div>
    </div>

    <script>
      // Capture all errors
      window.addEventListener("error", (event) => {
        const error = `
Error: ${event.message}
File: ${event.filename}
Line: ${event.lineno}:${event.colno}
Stack: ${event.error?.stack || "No stack trace"}
Timestamp: ${new Date().toLocaleTimeString()}
            `;

        console.error("ERROR CAPTURED:", error);
        document.getElementById("errorLog").innerHTML += `<pre>${error}</pre>`;
      });

      // Also capture unhandled promise rejections
      window.addEventListener("unhandledrejection", (event) => {
        const error = `
Promise Rejection: ${event.reason?.message || event.reason}
Stack: ${event.reason?.stack || "No stack trace"}
Timestamp: ${new Date().toLocaleTimeString()}
            `;

        console.error("UNHANDLED PROMISE:", error);
        document.getElementById("errorLog").innerHTML += `<pre>${error}</pre>`;
      });

      document.getElementById("errorLog").innerHTML =
        "<p>Waiting for errors...</p>";
    </script>
  </body>
</html>
